sudo: required

env:
  - MOZ_HEADLESS=1
addons:
  firefox: latest
  sonarcloud:
    organization: "lisible-github"
    token:
        secure: "iVu+5Y7fRGChYYfpxz2fcDH8ZaD4UeAUHzhV/+B3LfFVacoBFPKChxT3yfUBXql8Msfc1TOxxuPBrF7onrpDP8I2bCLjupaHyUr8YgLkZwGIFwT9VavaIWfQ8MZDHE46QdiFmhHXVMIG+PMux2GGoGaRwiJ37t19Ufm3Jx8213yD/KMHlegutun4lIKCcovoGMvqT6DPkkGyuM6nkwRd+PVGSH7XV8MoEBGOoMpjy1nVvcMyhy4CiHeYpLPSye5FhiSY9vpbzhqMAzIc4C5ORVDz14prPtH3GGZC/x5eCFwAm2y1E+6LS4dkRMKzVVWWa55NYOBFZjsTqDyB9wer0BwnOW4xjPxAHwchJ5DyeevcULp3hlzgIoovmIozchW4fC5aNNoSECoO6u58j5JmvrIRWf+K2vWxyMMyGrjdYJ73GYX+EbZ119av+A1fs6u2ZDzlqL7kuKLXKqaejSJh5VbnFwW2OxOrhvTUJHlDGjh38mZlOEX9edCRMNvxh4QydbTIHAiaxDzdUnKwWy1cAUxtLtPdVCVIaowxf6pa1nGkQUMeyKaa8QKOfpjzoLOHpaXNP/E541jh515nd2g89xYyT1VbTrkmPlldkn/QR2I2ew3gn7ITSxbGDxZG6FBqiorFfpiq8nU2JlOiXGX6JLn0c7Atf3v5v3HMH3WI98k="


language: python
python:
    - "3.6"

services:
    - docker
before_install:
    - wget https://github.com/mozilla/geckodriver/releases/download/v0.23.0/geckodriver-v0.23.0-linux64.tar.gz
    - mkdir geckodriver
    - tar -xzf geckodriver-v0.23.0-linux64.tar.gz -C geckodriver
    - export PATH=$PATH:$PWD/geckodriver
    - geckodriver --version
    - sudo docker-compose up -d
    - sudo apt-get install xvfb
    - pip install selenium
    - pip install pyvirtualdisplay

script:
    - sleep 10
    - ./tests_e2e/launcher.sh
    - cat geckodriver.log
    - sonar-scanner
